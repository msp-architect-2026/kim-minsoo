FROM python:3.10-slim

# OpenCV êµ¬ë™ì— í•„ìš”í•œ ìµœì†Œí•œì˜ ì‹œìŠ¤í…œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜
RUN apt-get update && apt-get install -y \
    libglib2.0-0 \
    && rm -rf /var/lib/apt/lists/*

# ì‘ì—… í´ë” ì„¤ì •
WORKDIR /app

# íŒŒì´ì¬ íŒ¨í‚¤ì§€ ì„¤ì¹˜
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# ì½”ë“œì™€ ëª¨ë¸ íŒŒì¼ ë³µì‚¬
COPY . .

# ğŸš€ ì¶”ê°€ëœ ë¶€ë¶„: 11ë¶„ ì¬ì„¤ì¹˜ë¥¼ í”¼í•˜ê¸° ìœ„í•´ ë§¨ ë§ˆì§€ë§‰ì— ë¼ì´ë¸ŒëŸ¬ë¦¬ ë§ë¶™ì„
# ğŸš€ ì¶”ê°€ëœ ë¶€ë¶„: libgl1 ì„ íŒ¨í‚¤ì§€ ëª©ë¡ì— ì¶”ê°€í•©ë‹ˆë‹¤.
RUN apt-get update && apt-get install -y \
    libxcb1 libxext6 libsm6 libxrender1 libgl1 \
    && rm -rf /var/lib/apt/lists/*


# ì»¨í…Œì´ë„ˆê°€ ì¼œì§ˆ ë•Œ ì‹¤í–‰í•  ê¸°ë³¸ ëª…ë ¹ì–´
ENTRYPOINT ["python", "app.py"]